<?xml version="1.0"?>
<form string="Purchase Order">
  <group col="6" colspan="4">
    <field name="name" select="1"/>
    <field name="date_order" select="2"/>
    <field name="origin" select="2"/>
  </group>
  <notebook colspan="4">
    <page string="Purchase Order">
      <field name="partner_id" on_change="onchange_partner_id(partner_id)" select="1" domain="[('supplier','=', 1)]"/>
      <field name="partner_address_id"/>
      <field domain="[('type','=','purchase')]" name="pricelist_id"/>
      <field name="partner_ref" select="2"/>
      <newline/>
      <field colspan="4" name="order_line" nolabel="1" mode="tree,form">
        <tree colors="red:date_planned&lt;=current_date" string="Purchase Order Lines">
          <field name="date_planned"/>
          <field name="name"/>
          <field name="product_id"/>
          <field name="product_qty"/>
          <field name="product_uom"/>
          <field name="price_unit"/>
          <field name="price_subtotal"/>
        </tree>
        <!-- default form view -->
      </field>
      <group col="7" colspan="4">
        <field name="amount_total" sum="Total amount"/>
      </group>
      <group col="11" colspan="4">
        <field name="state" readonly="1" select="1"/>
        <button name="purchase_confirm" states="draft" string="Confirm Purchase Order" icon="gtk-execute"/>
        <button name="purchase_appbuyer" states="wait_auth" string="Approve Purchase" icon="gtk-ok"/>
        <button name="purchase_approve" states="confirmed" string="Approved by Supplier" icon="gtk-ok"/>
        <button name="purchase_cancel" states="draft,confirmed,wait_auth" string="Cancel Purchase Order" icon="gtk-cancel"/>
        <button name="action_cancel_draft" states="cancel" string="Set to Draft" type="object" icon="gtk-convert"/>
        <!--<button name="action_cancel" states="approved,except_picking,except_invoice" string="Cancel Purchase Order" type="object" icon="gtk-cancel"/>-->

        <button name="picking_ok" states="except_picking" string="Manually Corrected" icon="gtk-convert"/>
        <button name="invoice_ok" states="except_invoice" string="Manually Corrected" icon="gtk-convert"/>
      </group>
    </page>
    <page string="Delivery &amp; Invoices" groups="account.group_account_user">
      <group colspan="2" col="2">
        <separator string="Delivery" colspan="2"/>
        <field name="minimum_planned_date"/>
        <field name="location_id"/>
      </group>
      <group colspan="2" col="2">
        <separator string="Invoice Control" colspan="2"/>
        <field name="invoice_method"/>
      </group>
    </page>
    <page string="Note">
      <field colspan="4" name="notes"/>
    </page>
  </notebook>
</form>
